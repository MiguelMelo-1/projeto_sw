{% extends './layout/base.html' %}

{% block link %}
<link href="{{ url_for('static', filename='tabulator-master/dist/css/tabulator.min.css')}}" rel="stylesheet">
{% endblock %}

{% block title %}
    Tarefas
{% endblock %}

<!-- Navigation bar -->
{% include 'includes/navbar.html' %}
<!-- end navigation bar -->
{% block content %}

<div class="container">
    <h1 class="text-light">Lista de Tarefas</h1>
    <ul>
    {% for task in tasks %}
        <li class="text-light">Titulo: {{ task.title }}</li>
        <li class="text-light">Descrição: {{ task.desc }}</li>
        <li class="text-light">Categoria: {{ task.category }}</li>
        <li class="text-light">Data de Inicio: {{ task.date_start }}</li>
        <li class="text-light">Prazo Final: {{ task.date_end }}</li>
        <hr>
    {% endfor %}
    </ul>
</div>
{{ tasks }}
<div id="tabela-tasks">
</div>
{% endblock %}

{% block script %}
<script type="text/javascript" src="url_for('static', filename='tabulator-master/dist/js/tabulator.min.js')"></script>

<script>
    import {TabulatorFull as Tabulator} from 'tabulator-tables';
    var table = new Tabulator("#tabela-tasks", {
        data:"{{ tasks }}",
        autoColumns:true,
        columns:[
            {title:"#", field:"id", sorter:"number"},
            {title:"Titulo", field:"title", sorter:"string", hozAlign:"center"},
            {title:"Categoria", field:"category", sorter:"string", hozAlign:"center"},
            {title:"estado", field:"state", sorter:"string", hozAlign:"center"}
        ],
    });
</script>

<script>
    function onLoad(){
        document.getElementById("idNavTarefas").className = "nav-link text-white active fs-5";
        document.getElementById("idNavTarefas").href = "";
    }
    window.onload = onload;
</script>
{% endblock %}